<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Zihan Teng</title>
    <style>
        /* ================= CSS Ê†∏ÂøÉÊ†∑Âºè ================= */
        :root {
            --sidebar-w: 260px;
            --font-main: "Helvetica Neue", Helvetica, Arial, sans-serif;
            --line-color: rgba(255, 255, 255, 0.2);
            --bg-black: #000;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-black);
            color: #fff;
            overflow-x: hidden;
        }

        /* 1. ËÉåÊôØÂÆπÂô® */
        #bg-container {
            position: fixed; inset: 0; z-index: -1;
            background-size: cover; background-position: center;
            transition: background-image 2s ease-in-out, filter 1s ease;
            filter: brightness(0.8);
        }
        body.detail-mode #bg-container {
            filter: blur(20px) brightness(0.5);
            transform: scale(1.05); 
        }

        /* 2. ÂÖ•Âú∫Âä®Áîª */
        #splash {
            position: fixed; inset: 0; background: transparent; z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            font-size: 24px; letter-spacing: 8px; font-weight: 300;
            text-shadow: 0 0 20px rgba(0,0,0,0.8);
            animation: splashSeq 3.5s forwards; pointer-events: none;
        }
        @keyframes splashSeq {
            0% { opacity: 0; } 30% { opacity: 1; } 70% { opacity: 1; } 100% { opacity: 0; visibility: hidden; }
        }

        /* 3. ‰æßËæπÂØºËà™Ê†è (PC) */
        aside {
            position: fixed; left: 0; top: 0; bottom: 0; width: var(--sidebar-w);
            padding: 60px 50px; z-index: 1000; 
            display: flex; flex-direction: column;
            opacity: 0; animation: fadeInUI 1.5s ease forwards; animation-delay: 2.5s; 
        }
        h1#logo { font-size: 20px; font-weight: 400; letter-spacing: 1px; margin-bottom: 80px; cursor: pointer; }
        .menu-item { list-style: none; margin-bottom: 25px; cursor: pointer; font-size: 13px; letter-spacing: 2px; opacity: 0.5; transition: 0.3s; }
        .menu-item:hover, .menu-item.active { opacity: 1; font-weight: 600; }

        /* 4. ‰∏ªÂÜÖÂÆπ (PC) */
        main {
            margin-left: var(--sidebar-w); min-height: 100vh;
            padding: 60px 80px 60px 20px;
            transition: opacity 0.5s;
            opacity: 0; animation: fadeInUI 1.5s ease forwards; animation-delay: 2.8s;
        }
        @keyframes fadeInUI { to { opacity: 1; } }

        .list-container { max-width: 800px; }
        .list-row { border-bottom: 0.5px solid var(--line-color); padding: 25px 0; transition: 0.3s; }
        .list-row:first-child { padding-top: 0; border-top: none; }
        .list-row h2 { font-size: 18px; font-weight: 700; cursor: pointer; letter-spacing: 0.5px; }
        .list-row p { font-size: 14px; opacity: 0.7; margin-top: 8px; font-weight: 300; }
        .news-detail-box { max-height: 0; overflow: hidden; transition: max-height 0.6s ease; font-size: 14px; opacity: 0.7; font-weight: 300; line-height: 1.8; }
        .news-detail-box.open { max-height: 500px; margin-top: 15px; }

        /* 5. ËØ¶ÊÉÖÈ°µÊµÆÂ±Ç (PC) */
        #detail-view {
            display: none; position: fixed; inset: 0 0 0 var(--sidebar-w); 
            z-index: 500; padding: 60px 80px 60px 20px; overflow-y: auto;
        }

        .detail-layout { 
            position: relative; display: flex; gap: 60px; 
            align-items: stretch; max-width: 1400px; 
            pointer-events: none; 
        }
        .text-col, .media-col { pointer-events: auto; }

        .text-col { flex: 0 0 45%; max-width: 45%; padding-right: 20px; display: flex; flex-direction: column; }
        .text-col h2 { font-size: 20px; font-weight: 700; margin-bottom: 20px; margin-top: 0; padding-right: 40px; }
        .text-col .intro { font-size: 14px; font-style: italic; opacity: 0.6; margin-bottom: 40px; display: block; }
        .text-col .concept { font-size: 15px; line-height: 2; opacity: 0.85; text-align: justify; white-space: pre-line; }

        .media-col {
            flex: 1; min-width: 0; position: sticky; top: 0;
            display: flex; flex-direction: column; align-items: center;
            padding-top: 60px; 
        }
        .media-wrapper { 
            position: relative; display: inline-block; max-width: 100%; width: 100%;
        }
        .media-col img {
            width: 100%; height: auto; max-height: calc(85vh - 60px); 
            object-fit: contain; box-shadow: 0 0 60px rgba(0,0,0,0.5);
            cursor: zoom-in; transition: opacity 0.5s ease; display: block; margin: 0 auto;
            -webkit-user-drag: none; user-drag: none;
        }

        /* ËΩÆÊí≠ÂõæÂúÜÁÇπ */
        .slider-dots { display: flex; justify-content: center; gap: 12px; margin-top: 20px; width: 100%; }
        .dot { width: 6px; height: 6px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; cursor: pointer; transition: all 0.3s ease; }
        .dot:hover { background: rgba(255, 255, 255, 0.6); }
        .dot.active { background: #fff; transform: scale(1.4); }

        /* PCÁ´Ø ËΩÆÊí≠ÊéßÂà∂ */
        .slider-controls-row { position: absolute; inset: 0; pointer-events: none; display: flex; justify-content: space-between; align-items: center; }
        .nav-btn { pointer-events: auto; width: 50px; height: 100%; display: flex; align-items: center; justify-content: center; cursor: pointer; opacity: 0; transition: opacity 0.3s; }
        .nav-btn:hover { opacity: 1; }
        .nav-prev { background: linear-gradient(to right, rgba(0,0,0,0.5), transparent); }
        .nav-next { background: linear-gradient(to left, rgba(0,0,0,0.5), transparent); }
        .nav-btn svg { width: 40px; height: 40px; stroke: #fff; stroke-width: 1; filter: drop-shadow(0 0 5px rgba(0,0,0,0.8)); }

        /* PCÁ´Ø ÂÖ≥Èó≠ÊåâÈíÆ */
        .close-btn { position: fixed; right: 50px; top: 50px; z-index: 2000; width: 32px; height: 32px; border: 1px solid rgba(255,255,255,0.7); border-radius: 50%; cursor: pointer; transition: all 0.4s ease; display: flex; align-items: center; justify-content: center; }
        .btn-holes { fill: #fff; opacity: 1; transform: scale(1); transition: 0.3s; position: absolute; }
        .btn-cross { stroke: #fff; stroke-width: 1.5; opacity: 0; transform: scale(0.5); transition: 0.3s; position: absolute; }
        .close-btn:hover { border-color: #fff; transform: rotate(90deg); }
        .close-btn:hover .btn-holes { opacity: 0; transform: scale(0.5); }
        .close-btn:hover .btn-cross { opacity: 1; transform: scale(0.6); }

        /* Lightbox */
        #lightbox { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 3000; justify-content: center; align-items: center; }
        #lightbox img { max-width: 90%; max-height: 90%; box-shadow: 0 0 80px rgba(0,0,0,0.8); transition: opacity 0.3s ease; -webkit-user-drag: none; user-drag: none; cursor: zoom-out; }
        .lb-nav { position: absolute; top: 0; bottom: 0; width: 100px; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 3010; opacity: 0; transition: opacity 0.3s; }
        .lb-nav:hover { opacity: 1; }
        .lb-prev { left: 0; background: linear-gradient(to right, rgba(0,0,0,0.6), transparent); }
        .lb-next { right: 0; background: linear-gradient(to left, rgba(0,0,0,0.6), transparent); }
        .lb-nav svg { width: 50px; height: 50px; stroke: #fff; stroke-width: 1; }
        .center-page { display: flex; justify-content: center; align-items: center; min-height: 80vh; text-align: center; font-size: 16px; line-height: 2.2; }


        /* ================= üì± ÊâãÊú∫Á´Ø‰∏ìÂ±û‰ºòÂåñ (Mobile) ================= */
        @media (max-width: 768px) {
            
            /* 1. ÂØºËà™Ê†è */
            aside { 
                position: relative; width: 100%; height: auto;
                padding: 30px 20px 10px 20px; align-items: center; 
                background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
                /* Á°Æ‰øùÂä®ÁîªÂ±ûÊÄßÂ≠òÂú®ÔºåÁ≠âÂæÖJSÁöÑ2.5Áßí */
                opacity: 0; animation: fadeInUI 1.5s ease forwards; animation-delay: 2.5s; 
            }
            h1#logo { margin-bottom: 20px; font-size: 20px; letter-spacing: 2px; text-align: center; }
            nav ul { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
            .menu-item { margin-bottom: 0; font-size: 12px; }

            /* 2. ‰∏ªÂÜÖÂÆπ */
            main { 
                margin-left: 0; padding: 10px 20px 80px 20px; 
                /* Á°Æ‰øùÂä®ÁîªÂ±ûÊÄßÂ≠òÂú®ÔºåÁ≠âÂæÖJSÁöÑ2.5Áßí */
                opacity: 0; animation: fadeInUI 1.5s ease forwards; animation-delay: 2.8s;
            }

            /* 3. ËØ¶ÊÉÖÈ°µÂÆπÂô® */
            #detail-view { 
                margin-left: 0; inset: 0; 
                padding: 120px 20px 40px 20px; 
                background: transparent; 
            }
            .detail-layout { flex-direction: column; gap: 30px; }

            .media-col { position: static; width: 100%; padding-top: 0; order: 0; }
            .media-col img { max-height: 50vh; width: 100%; }

            /* ÊâãÊú∫Á´ØÈöêËóèÁÆ≠Â§¥ÔºåÂè™ÁïôÂúÜÁÇπ */
            .slider-controls-row { display: none !important; }
            .lb-nav { display: none !important; }
            .close-btn { display: none !important; }

            /* ÊâãÊú∫Á´ØÂúÜÁÇπ */
            .dot { width: 7px; height: 7px; gap: 15px; }

            /* ÊâãÊú∫Á´ØÊñáÂ≠óÂàó */
            .text-col { width: 100%; max-width: 100%; flex: 1; padding-right: 0; order: 1; }
            .text-col h2 { text-align: center; padding-right: 0; font-size: 22px; margin-bottom: 10px; }
            .intro { text-align: center; margin-bottom: 30px; }

            #splash { display: flex; font-size: 18px; letter-spacing: 4px; } 
            #lightbox img { cursor: default; }
        }
    </style>
</head>
<body>

    <div id="splash">Zihan Teng</div>
    <div id="bg-container"></div>

    <aside>
        <h1 id="logo" onclick="showNews()">Zihan Teng</h1>
        <nav>
            <ul>
                <li class="menu-item" id="nav-news" onclick="showNews()">NEWS</li>
                <li class="menu-item" id="nav-works" onclick="showWorksList()">WORKS</li>
                <li class="menu-item" id="nav-about" onclick="showAbout()">ABOUT</li>
                <li class="menu-item" id="nav-contact" onclick="showContact()">CONTACT</li>
            </ul>
        </nav>
    </aside>

    <main id="app"></main>

    <div id="detail-view"></div>
    
    <div id="lightbox" onclick="closeLightbox(event)">
        <div class="lb-nav lb-prev" onclick="changeLightboxSlide(-1); event.stopPropagation();">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="square"><polyline points="15 18 9 12 15 6"></polyline></svg>
        </div>
        <div class="lb-nav lb-next" onclick="changeLightboxSlide(1); event.stopPropagation();">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="square"><polyline points="9 18 15 12 9 6"></polyline></svg>
        </div>
        <img src="" id="lightbox-img" onclick="handleLightboxImageClick(event)">
    </div>

    <script src="data.js"></script>

    <script>
        /* ================= JS ÈÄªËæë ================= */

        let bgTimer, slideTimer;
        let bgIdx = 0, currentSlideIdx = 0;
        let currentLbWorkId = null, currentLbIndex = 0;

        window.onload = () => {
            initBackground(); 
            // „ÄêÂÖ≥ÈîÆ‰øÆÂ§ç„ÄëÊâÄÊúâËÆæÂ§áÁªü‰∏ÄÁ≠âÂæÖ2.5ÁßíÔºåÈÖçÂêàCSSÂä®Áîª
            setTimeout(() => { showNews(); }, 2500);
            initLightboxSwipe(); 
        };

        function initBackground() {
            if(bgTimer) return;
            const bg = document.getElementById('bg-container');
            if(siteData.backgrounds.length > 0) {
                bg.style.backgroundImage = `url('${siteData.backgrounds[bgIdx]}')`;
            }
            const update = () => {
                bgIdx = (bgIdx + 1) % siteData.backgrounds.length;
                bg.style.backgroundImage = `url('${siteData.backgrounds[bgIdx]}')`;
            };
            bgTimer = setInterval(update, 5000);
        }

        function enterDetailMode() {
            clearInterval(bgTimer); bgTimer = null; 
            document.body.classList.add('detail-mode');
        }

        function exitDetailMode() {
            document.body.classList.remove('detail-mode');
            document.getElementById('detail-view').style.display = 'none';
            const main = document.getElementById('app');
            main.style.display = 'block'; 
            setTimeout(() => {
                main.style.opacity = '1'; main.style.pointerEvents = 'auto';
            }, 50);
            clearInterval(slideTimer);
            initBackground();
        }

        function clearActive() {
            document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
        }

        function showNews() {
            exitDetailMode(); clearActive();
            document.getElementById('nav-news').classList.add('active');
            const lang = 'EN'; 
            let html = `<div class="list-container">`;
            siteData.news.forEach((n, i) => {
                const detailTextRaw = n.details[lang] || Object.values(n.details)[0];
                const detailText = detailTextRaw.replace(/\n/g, '<br>');
                html += `
                <div class="list-row">
                    <h2 onclick="toggleNews(${i})">${n.title}</h2>
                    <p>${n.location} | ${n.time}</p>
                    <div id="news-box-${i}" class="news-detail-box">${detailText}</div>
                </div>`;
            });
            document.getElementById('app').innerHTML = html + `</div>`;
        }

        function toggleNews(i) {
            document.getElementById(`news-box-${i}`).classList.toggle('open');
        }

        function showWorksList() {
            exitDetailMode(); clearActive();
            document.getElementById('nav-works').classList.add('active');
            const lang = 'EN';
            let html = `<div class="list-container">`;
            siteData.works.forEach(w => {
                const name = w.name[lang] || Object.values(w.name)[0];
                html += `<div class="list-row" onclick="showWorkDetail('${w.id}')"><h2>${name}</h2></div>`;
            });
            document.getElementById('app').innerHTML = html + `</div>`;
        }

        function showWorkDetail(id) {
            const work = siteData.works.find(w => w.id === id);
            const lang = 'EN';
            enterDetailMode(); 
            
            const main = document.getElementById('app');
            main.style.opacity = '0'; main.style.pointerEvents = 'none'; main.style.display = 'none'; 
            
            const overlay = document.getElementById('detail-view');
            overlay.style.display = 'block';
            currentSlideIdx = 0;
            
            const name = work.name[lang] || Object.values(work.name)[0];
            const intro = work.intro[lang] || Object.values(work.intro)[0] || "";
            const concept = work.concept[lang] || Object.values(work.concept)[0] || "";
            
            const prevIcon = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="square"><polyline points="15 18 9 12 15 6"></polyline></svg>`;
            const nextIcon = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="square"><polyline points="9 18 15 12 9 6"></polyline></svg>`;
            
            const buttonDots = `
                <svg class="btn-holes" viewBox="0 0 24 24"><circle cx="9" cy="9" r="1.5" fill="currentColor"/><circle cx="15" cy="9" r="1.5" fill="currentColor"/><circle cx="9" cy="15" r="1.5" fill="currentColor"/><circle cx="15" cy="15" r="1.5" fill="currentColor"/></svg>
                <svg class="btn-cross" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            `;

            let dotsHtml = '';
            if (work.images.length > 1) {
                dotsHtml = '<div class="slider-dots">';
                work.images.forEach((_, idx) => {
                    dotsHtml += `<span class="dot ${idx===0?'active':''}" onclick="goToSlide('${id}', ${idx})"></span>`;
                });
                dotsHtml += '</div>';
            }

            overlay.innerHTML = `
                <div class="close-btn" onclick="showWorksList()">
                    ${buttonDots}
                </div>

                <div class="detail-layout">
                    <div class="text-col">
                        <h2>${name}</h2>
                        <span class="intro">${intro}</span>
                        <div class="concept">${concept}</div>
                    </div>
                    <div class="media-col">
                        <div class="media-wrapper">
                            <img id="main-slide" src="${work.images[0] || ''}" onclick="openLightbox('${id}')">
                            <div class="slider-controls-row">
                                <div class="nav-btn nav-prev" onclick="changeSlide('${id}', -1)">${prevIcon}</div>
                                <div class="nav-btn nav-next" onclick="changeSlide('${id}', 1)">${nextIcon}</div>
                            </div>
                            ${dotsHtml}
                        </div>
                    </div>
                </div>
            `;
            if(work.images.length > 1) {
                if (slideTimer) clearInterval(slideTimer);
                slideTimer = setInterval(() => changeSlide(id, 1), 3000);
                initInlineSwipe(id);
            }
        }

        function handleLightboxImageClick(e) {
            if (window.innerWidth <= 768) {
                const width = window.innerWidth;
                const clickX = e.clientX;
                if (clickX < width / 2) changeLightboxSlide(-1);
                else changeLightboxSlide(1);
                e.stopPropagation(); 
            } else {
                document.getElementById('lightbox').style.display = 'none';
            }
        }

        let touchStartX = 0;
        let touchEndX = 0;
        const swipeThreshold = 50; 

        function initInlineSwipe(id) {
            const img = document.getElementById('main-slide');
            if(!img) return;
            img.addEventListener('touchstart', e => touchStartX = e.changedTouches[0].screenX, {passive: true});
            img.addEventListener('touchend', e => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe(dir => changeSlide(id, dir));
            }, {passive: true});
        }

        function initLightboxSwipe() {
            const img = document.getElementById('lightbox-img');
            if(!img) return;
            img.addEventListener('touchstart', e => touchStartX = e.changedTouches[0].screenX, {passive: true});
            img.addEventListener('touchend', e => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe(dir => changeLightboxSlide(dir));
            }, {passive: true});
        }

        function handleSwipe(callback) {
            const diffX = touchStartX - touchEndX;
            if (Math.abs(diffX) > swipeThreshold) {
                if (diffX > 0) callback(1); 
                else callback(-1);
            }
        }

        function changeSlide(id, dir) {
            const work = siteData.works.find(w => w.id === id);
            if(!work.images || work.images.length === 0) return;
            currentSlideIdx = (currentSlideIdx + dir + work.images.length) % work.images.length;
            updateSlideView(work);
        }

        function goToSlide(id, index) {
            const work = siteData.works.find(w => w.id === id);
            currentSlideIdx = index;
            if (slideTimer) clearInterval(slideTimer);
            slideTimer = setInterval(() => changeSlide(id, 1), 3000);
            updateSlideView(work);
        }

        function updateSlideView(work) {
            const img = document.getElementById('main-slide');
            img.style.opacity = 0.5;
            setTimeout(() => {
                img.src = work.images[currentSlideIdx];
                img.onload = () => { img.style.opacity = 1; };
            }, 300);
            const dots = document.querySelectorAll('.dot');
            dots.forEach((dot, idx) => {
                if (idx === currentSlideIdx) dot.classList.add('active');
                else dot.classList.remove('active');
            });
        }

        function openLightbox(workId) {
            currentLbWorkId = workId;
            currentLbIndex = currentSlideIdx; 
            const work = siteData.works.find(w => w.id === workId);
            const lb = document.getElementById('lightbox');
            const img = document.getElementById('lightbox-img');
            img.src = work.images[currentLbIndex];
            lb.style.display = 'flex';
        }

        function changeLightboxSlide(dir) {
            const work = siteData.works.find(w => w.id === currentLbWorkId);
            if(!work) return;
            currentLbIndex = (currentLbIndex + dir + work.images.length) % work.images.length;
            const img = document.getElementById('lightbox-img');
            img.style.opacity = 0.5;
            setTimeout(() => {
                img.src = work.images[currentLbIndex];
                img.onload = () => { img.style.opacity = 1; };
            }, 200);
        }

        function closeLightbox(e) {
            if(e.target.id === 'lightbox') document.getElementById('lightbox').style.display = 'none';
        }

        function showAbout() {
            exitDetailMode(); clearActive();
            document.getElementById('nav-about').classList.add('active');
            const content = siteData.about['EN'] || Object.values(siteData.about)[0];
            document.getElementById('app').innerHTML = `<div class="center-page" style="max-width:800px; margin:0 auto;">${content}</div>`;
        }

        function showContact() {
            exitDetailMode(); clearActive();
            document.getElementById('nav-contact').classList.add('active');
            const content = siteData.contact['EN'] || Object.values(siteData.contact)[0];
            document.getElementById('app').innerHTML = `<div class="center-page">${content}</div>`;
        }
    </script>
</body>
</html>